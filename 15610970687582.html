<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  PHP错误等级 - artikell
  
  </title>
 <meta name="description" content="The royal family never give up">
 <link href="atom.xml" rel="alternate" title="artikell" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">artikell</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; artikell</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>Optimize</label></li>

          
            <li><a title="限流算法整理" href="15613654156668.html">限流算法整理</a></li>
          
            <li><a title="PHP错误等级" href="15610970687582.html">PHP错误等级</a></li>
          
            <li><a title="服务发现架构" href="15606052161429.html">服务发现架构</a></li>
          
            <li><a title="分布式事务" href="15605931624272.html">分布式事务</a></li>
          
            <li><a title="缓存总结" href="15605709598391.html">缓存总结</a></li>
          
            <li><a title="TCP vs UDP 总结" href="15605624219274.html">TCP vs UDP 总结</a></li>
          
            <li><a title="优化专栏" href="15526053026851.html">优化专栏</a></li>
          

      
        <li class="divider"></li>
        <li><label>Redis</label></li>

          
            <li><a title="Redis 主流程学习" href="15345862239174.html">Redis 主流程学习</a></li>
          
            <li><a title="Redis 集群管理学习" href="15319770094977.html">Redis 集群管理学习</a></li>
          
            <li><a title="Redis 慢日志" href="15304363559324.html">Redis 慢日志</a></li>
          
            <li><a title="Redis启动过程分析" href="15298493212536.html">Redis启动过程分析</a></li>
          
            <li><a title="Redis 有序列表zset源码解析" href="15287304018827.html">Redis 有序列表zset源码解析</a></li>
          
            <li><a title="Redis常用数据类型介绍、使用场景" href="15286369556294.html">Redis常用数据类型介绍、使用场景</a></li>
          
            <li><a title="Redis Bio模块的学习" href="15286278830553.html">Redis Bio模块的学习</a></li>
          
            <li><a title="Redis 跳跃表" href="15286261757400.html">Redis 跳跃表</a></li>
          
            <li><a title="Redis 对象Object" href="15286147511534.html">Redis 对象Object</a></li>
          
            <li><a title="Redis 字典扫描算法" href="15285709665764.html">Redis 字典扫描算法</a></li>
          
            <li><a title="Redis 淘汰策略解读" href="15285605915126.html">Redis 淘汰策略解读</a></li>
          

      
        <li class="divider"></li>
        <li><label>Mysql</label></li>

          
            <li><a title="Mysql架构" href="15605689231307.html">Mysql架构</a></li>
          
            <li><a title="MYSQL技术内幕学习" href="15602214770128.html">MYSQL技术内幕学习</a></li>
          
            <li><a title="红黑树学习纪要" href="15601369361254.html">红黑树学习纪要</a></li>
          

      
        <li class="divider"></li>
        <li><label>Docker</label></li>

          
            <li><a title="总结docker搭建服务过程" href="15390880867263.html">总结docker搭建服务过程</a></li>
          

      
        <li class="divider"></li>
        <li><label>Feature</label></li>

          
            <li><a title="工作发展" href="15605615631803.html">工作发展</a></li>
          

      
        <li class="divider"></li>
        <li><label>Friends</label></li>

          
            <li><a title="张雅宸的空间" href="15605621287027.html">张雅宸的空间</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>Optimize</span></li>
                        
                          <li><a title="限流算法整理" href="15613654156668.html">限流算法整理</a></li>
                        
                          <li><a title="PHP错误等级" href="15610970687582.html">PHP错误等级</a></li>
                        
                          <li><a title="服务发现架构" href="15606052161429.html">服务发现架构</a></li>
                        
                          <li><a title="分布式事务" href="15605931624272.html">分布式事务</a></li>
                        
                          <li><a title="缓存总结" href="15605709598391.html">缓存总结</a></li>
                        
                          <li><a title="TCP vs UDP 总结" href="15605624219274.html">TCP vs UDP 总结</a></li>
                        
                          <li><a title="优化专栏" href="15526053026851.html">优化专栏</a></li>
                        

                    
                      <li class="side-title"><span>Redis</span></li>
                        
                          <li><a title="Redis 主流程学习" href="15345862239174.html">Redis 主流程学习</a></li>
                        
                          <li><a title="Redis 集群管理学习" href="15319770094977.html">Redis 集群管理学习</a></li>
                        
                          <li><a title="Redis 慢日志" href="15304363559324.html">Redis 慢日志</a></li>
                        
                          <li><a title="Redis启动过程分析" href="15298493212536.html">Redis启动过程分析</a></li>
                        
                          <li><a title="Redis 有序列表zset源码解析" href="15287304018827.html">Redis 有序列表zset源码解析</a></li>
                        
                          <li><a title="Redis常用数据类型介绍、使用场景" href="15286369556294.html">Redis常用数据类型介绍、使用场景</a></li>
                        
                          <li><a title="Redis Bio模块的学习" href="15286278830553.html">Redis Bio模块的学习</a></li>
                        
                          <li><a title="Redis 跳跃表" href="15286261757400.html">Redis 跳跃表</a></li>
                        
                          <li><a title="Redis 对象Object" href="15286147511534.html">Redis 对象Object</a></li>
                        
                          <li><a title="Redis 字典扫描算法" href="15285709665764.html">Redis 字典扫描算法</a></li>
                        
                          <li><a title="Redis 淘汰策略解读" href="15285605915126.html">Redis 淘汰策略解读</a></li>
                        

                    
                      <li class="side-title"><span>Mysql</span></li>
                        
                          <li><a title="Mysql架构" href="15605689231307.html">Mysql架构</a></li>
                        
                          <li><a title="MYSQL技术内幕学习" href="15602214770128.html">MYSQL技术内幕学习</a></li>
                        
                          <li><a title="红黑树学习纪要" href="15601369361254.html">红黑树学习纪要</a></li>
                        

                    
                      <li class="side-title"><span>Docker</span></li>
                        
                          <li><a title="总结docker搭建服务过程" href="15390880867263.html">总结docker搭建服务过程</a></li>
                        

                    
                      <li class="side-title"><span>Feature</span></li>
                        
                          <li><a title="工作发展" href="15605615631803.html">工作发展</a></li>
                        

                    
                      <li class="side-title"><span>Friends</span></li>
                        
                          <li><a title="张雅宸的空间" href="15605621287027.html">张雅宸的空间</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>PHP错误等级</h1>

<h2 id="toc_0">前言</h2>

<p>有人问，在PHP中，函数名重复和函数不存在，分别会报什么错误？而我，一头雾水，于是，来整理整理。</p>

<h2 id="toc_1">PHP的错误</h2>

<h3 id="toc_2">错误分类</h3>

<p>首先，至少能知道，php中有个可以控制报错信息的函数：<code>error_reporting</code>，而该函数的参数，则是各个错误与等级：</p>

<pre><code>1    E_ERROR        报告运行时的致命错误
2    E_WARNING      报告运行的非致命错误

4    E_PARSE        报告解析错误
8    E_NOTICE       报告通告，注意，表示所做的事情可能是错误的.
16   E_CORE_ERROR   报告PHP引擎启动失败
32   E_CORE_WARNING 报告PHP引擎启动时非致命错误

64   E_COMPILE_ERROR    报告编译错误
128  E_COMPILE_WARNING  报告编译时出现的非致命错误

256  E_USER_ERROR      报告用户触发的错误
512  E_USER_WARNING    报告用户触发的警告
1024 E_USER_NOTICE     报告用户触发的通告

2048 E_STRICT         报告不赞成的用法和不推荐的行为
8192 E_DEPRECATED     运行时通知。启用后将会对在未来版本中可能无法正常工作的代码给出警告。
30719 E_ALL           报告所有的错误和警告
</code></pre>

<p>当然，你可以通过修改php.ini文件来设置默认错误等级：<br/>
<code><br/>
error_reporting = E_ALL &amp; ~(E_NOTICE) &amp; ~(E_WARNING)<br/>
</code></p>

<p>在php.ini文件中，和错误有关的设置有如下几个:<br/>
1. error_reporting，设定错误级别<br/>
2. display_errors，是否显示错误报告，设置为ON则打开,设置为OFF则关闭所有错误提示<br/>
3. log_errors，默认设置为OFF,是否记录错误日志;<br/>
4. track_errors，默认设置为OFF,该选项可以帮助解决代码中的错误,而不是让PHP提供其默认的功能。</p>

<h3 id="toc_3">错误级别</h3>

<p>为了那快速定位类型，于是就有下面的前置脚本：</p>

<pre><code>&lt;?php
error_reporting(E_ALL);
function errorHandler($errno, $errstr, $errfile, $errline)
{
    switch($errno)
    {
        case E_ERROR: // 1 //
            echo &#39;E_ERROR&#39;.PHP_EOL;
        case E_WARNING: // 2 //
            echo &#39;E_WARNING&#39;.PHP_EOL;
        case E_PARSE: // 4 //
            echo &#39;E_PARSE&#39;.PHP_EOL;
        case E_NOTICE: // 8 //
            echo &#39;E_NOTICE&#39;.PHP_EOL;
        case E_CORE_ERROR: // 16 //
            echo &#39;E_CORE_ERROR&#39;.PHP_EOL;
        case E_CORE_WARNING: // 32 //
            echo &#39;E_CORE_WARNING&#39;.PHP_EOL;
        case E_COMPILE_ERROR: // 64 //
            echo &#39;E_COMPILE_ERROR&#39;.PHP_EOL;
        case E_COMPILE_WARNING: // 128 //
            echo &#39;E_COMPILE_WARNING&#39;.PHP_EOL;
        case E_USER_ERROR: // 256 //
            echo &#39;E_USER_ERROR&#39;.PHP_EOL;
        case E_USER_WARNING: // 512 //
            echo &#39;E_USER_WARNING&#39;.PHP_EOL;
        case E_USER_NOTICE: // 1024 //
            echo &#39;E_USER_NOTICE&#39;.PHP_EOL;
        case E_STRICT: // 2048 //
            echo &#39;E_STRICT&#39;.PHP_EOL;
        case E_RECOVERABLE_ERROR: // 4096 //
            echo &#39;E_RECOVERABLE_ERROR&#39;.PHP_EOL;
        case E_DEPRECATED: // 8192 //
            echo &#39;E_DEPRECATED&#39;.PHP_EOL;
        case E_USER_DEPRECATED: // 16384 //
            echo &#39;E_USER_DEPRECATED&#39;.PHP_EOL;
    }
}

$error_handler = set_error_handler(&quot;errorHandler&quot;);
</code></pre>

<p>这样，我们就开始定位相关错误会出现的情况。</p>

<h4 id="toc_4">E_DEPRECATED &amp;&amp; E_USER_DEPRECATED</h4>

<pre><code>&lt;?php
include &#39;err.php&#39;;
class A {
    public function b() {
    }
}
$a = new A();
$a::b();
</code></pre>

<p>这个问题主要是因为通过静态方法的方式访问了非静态方法，官方介绍为：<em>启用后将会对在未来版本中可能无法正常工作的代码给出警告</em></p>

<h4 id="toc_5">函数重复</h4>

<pre><code>&lt;?php
include &#39;err.php&#39;;
class A {
    public function a(){
    }
    public function a(){
    }
}
$a = new A();
$a-&gt;a();
</code></pre>

<p>该问题则直接报：<code>PHP Fatal error:  Cannot redeclare A::a()</code>，说明这个直接解析失败，并走不到报错的逻辑。</p>

<h4 id="toc_6">访问不存在的方法</h4>

<pre><code>&lt;?php
include &#39;err.php&#39;;
class A {
}
$a = new A();
$a-&gt;a();
</code></pre>

<p>这个问题，也是报<code>PHP Fatal error:  Uncaught Error: Call to undefined method</code>，但是，这个会走到解析，主要原因也是因为<code>__call</code>方法的存在可能导致错误可以避免。</p>

<h4 id="toc_7">除0操作</h4>

<pre><code>&lt;?php
include &#39;err.php&#39;;
echo 1/0;
</code></pre>

<p>这个就不列举了，报了一堆错误：<br/>
<code><br/>
E_WARNING<br/>
E_PARSE<br/>
E_NOTICE<br/>
E_CORE_ERROR<br/>
E_CORE_WARNING<br/>
E_COMPILE_ERROR<br/>
E_COMPILE_WARNING<br/>
E_USER_ERROR<br/>
E_USER_WARNING<br/>
E_USER_NOTICE<br/>
E_STRICT<br/>
E_RECOVERABLE_ERROR<br/>
E_DEPRECATED<br/>
E_USER_DEPRECATED<br/>
</code></p>

<h2 id="toc_8">后续</h2>

<p>暂时并没有后续，可能后续进行php源码级别的解析吧</p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15613654156668.html"  title="Previous Post: 限流算法整理">&laquo; 限流算法整理</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15606052161429.html" 
	        title="Next Post: 服务发现架构">服务发现架构 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15610970687582.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>


  </body>
</html>
